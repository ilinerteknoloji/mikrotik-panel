// dbdiagram.io

Enum Role{
  admin
  user
}

Table users {
  id int [pk]
  first_name varchar [not null]
  last_name varchar [not null]
  username varchar [not null]
  email varchar [not null]
  phone_number varchar [not null]
  password varchar [not null]
  status bool [default: true]
  role Role [default: "user"]
  created_at timestamp
  updated_at timestamp
 }

 Table users_details {
  id int [pk]
  user_id int [not null, unique]
  is_email_verified bool [default: false]
  is_phone_number_verified bool [default: false]
  address varchar
  city varchar
  state varchar
  country varchar
  zip_code varchar
  created_at timestamp
  updated_at timestamp
 }

Table refresh_tokens {
  id int [pk]
  user_id int [not null]
  token text [not null, unique]
  status bool [default: true]
  expires_at timestamp
  created_at timestamp
  updated_at timestamp
}

Table access_tokens {
  id int [pk]
  user_id int [not null]
  token text [not null, unique]
  status bool [default: true]
  expires_at timestamp
  created_at timestamp
  updated_at timestamp
}

Table devices {
  id int [pk]
  user_agent text [not null]
  created_at timestamp
}

Table ips {
  id int [pk]
  ip_address varchar [not null, unique]
  created_at timestamp
}

Table user_devices_refresh_tokens {
  id int [pk]
  refresh_token_id int [not null]
  user_devices_id int [not null]
  created_at timestamp
}

Table user_devices {
  id int [pk]
  user_id int [not null]
  device_id int [not null]
  ip_id int [not null]
  created_at timestamp
  updated_at timestamp
}

Table logs {
  id int [pk]
  user_devices_id int
  ip_id int [not null]
  message text [not null]
  time timestamp
}

Table error_logs {
  id int [pk]
  message text [not null]
  status bool [default: true]
  created_at timestamp
  updated_at timestamp
}

Table feedbacks {
  id int [pk]
  user_id int [not null]
  message text [not null]
  status bool [default: true]
  created_at timestamp
  updated_at timestamp
}

Table complains {
  id int [pk]
  user_id int [not null]
  message text [not null]
  status bool [default: true]
  created_at timestamp
  updated_at timestamp
}

 Ref: users.id - users_details.user_id
 Ref: users.id < refresh_tokens.user_id
 Ref: users.id < access_tokens.user_id
 Ref: user_devices.user_id < users.id
 Ref: user_devices.device_id < devices.id
 Ref: user_devices.ip_id < ips.id
 Ref: user_devices_refresh_tokens.refresh_token_id <> refresh_tokens.id
 Ref: user_devices_refresh_tokens.user_devices_id <> user_devices.id
 Ref: logs.user_devices_id > user_devices.id
 Ref: logs.ip_id > ips.id
 Ref: feedbacks.user_id > users.id
 Ref: complains.user_id > users.id